{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>CS</title>
    <link rel="stylesheet" type="text/css" href="static/assets/css/landing.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="top-container">
            <ul class="navbar-links-top" id="navbar-links-top">
                <li><a href="/computers-equipment/">Equipos de Có0mputo</a><span class="hover-rect"></span></li>
                <li><a href="/infrastructure/">Infraestructura</a><span class="hover-rect"></span></li>
                <li><a href="/vehicles/">Vehículos</a><span class="hover-rect"></span></li>
                <li><a href="/equipments_and_tools/">Equipos y Herramientas</a><span class="hover-rect"></span></li>
                <li><a href="/category_services/">Servicios</a><span class="hover-rect"></span></li>
            </ul>
        </div>
        <div class="navbar-container">
        <div class="navbar-logo">
            <img src="/staticfiles/assets/images/brand-logos/CS_LOGO.png" alt="Logo">
        </div>
        <!-- Botón de menú para dispositivos móviles -->
        <div class="navbar-toggle" id="navbar-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <!-- Enlaces de navegación a la derecha -->
        <ul class="navbar-links" id="navbar-links">
            <li><a href="#home">Inicio</a><span class="hover-rect"></span></li>
            <li><a href="#pricing">Planes</a><span class="hover-rect"></span></li>
            <li><a href="#contact">Contacto</a><span class="hover-rect"></span></li>
            {% if user.is_authenticated %}
                <li class="name"><a>{{user.username}}<span class="hover-rect"></span></a></li>
            {% else %}
                <li><a href="/login">Inicio de sesión<span class="hover-rect"></span></a></li>
            {% endif %}
        </ul>
        </div>
    </nav>
    
    <section class="landing-section">
        <!-- <div class="container">
            <div class="card">
                <div class="imgbx">
                    <img src="/static/assets/images/landing/bgComputer.png" class="card-img" alt="Computo">
                </div>
                <div class="card-content">
                    <h3>Equipo de Computo</h3>
                    <a href="/computers-equipment/" class="cta">Ingresar</a>
                </div>
            </div>
            <div class="card">
                <div class="imgbx">
                    <img src="/static/assets/images/landing/bgInfraestructura.jpeg" class="card-img" alt="Infraestructura">
                </div>
                <div class="card-content">
                    <h3>Infraestructura</h3>
                    <a href="/infrastructure/" class="cta">Ingresar</a>
                </div>
            </div>
            <div class="card">
                <div class="imgbx">
                    <img src="/static/assets/images/landing/bgVehiculos.jpg" class="card-img" alt="Vehículos">
                </div>
                <div class="card-content">
                    <h3>Vehículos</h3>
                    <a href="/vehicles/" class="cta">Ingresar</a>
                </div>
            </div>
            <div class="card">
                <div class="imgbx">
                    <img src="/static/assets/images/landing/bgTools.jpg" class="card-img" alt="Herramientas">
                 </div>
                <div class="card-content">
                    <h3>Equipos y Herramientas</h3>
                    <a href="/equipments_and_tools/" class="cta">Ingresar</a>
                </div>
            </div>
            <div class="card">
                <div class="imgbx">
                <img src="/static/assets/images/landing/bgServicios.jpg" class="card-img" alt="Servicios">
                </div>
                <div class="card-content">
                    <h3>Servicios</h3>
                    <a href="/category_services/" class="cta">Ingresar</a>
                </div>
            </div>
        </div> -->
        <div class="card-container">
            <div class="card" style="background-image: url('/static/assets/images/landing/bgComputer.png')">
              <div class="overlay"></div>
              <div class="title">CapitalTECH</div>
              <div class="content">
                <div class="info">Administración de Equipo de Cómputo</div>
                <a href="/computers-equipment/" class="btn">Ingresar</a>
                <a href="#" class="btnmas">Conoce más</a>
              </div>
            </div>
            <div class="card" style="background-image: url('/static/assets/images/landing/bgInfraestructura.jpeg')">
              <div class="overlay"></div>
              <div class="title">CapitalDATA</div>
              <div class="content">
                <div class="info">Administración de Infraestructura</div>
                <a href="/infrastructure/" class="btn">Ingresar</a>
                <a href="#" class="btnmas">Conoce más</a>
              </div>
            </div>
            <div class="card" style="background-image: url('/static/assets/images/landing/bgVehiculos.jpg')">
              <div class="overlay"></div>
              <div class="title">CapitalTRANSPORT</div>
              <div class="content">
                <div class="info">Adminnistración de Vehiculos Empresariales</div>
                <a href="/vehicles/" class="btn">Ingresar</a>
                <a href="#" class="btnmas">Conoce más</a>
              </div>
            </div>
            <div class="card" style="background-image: url('/static/assets/images/landing/bgTools.jpg')">
              <div class="overlay"></div>
              <div class="title">CapitalASSETS</div>
              <div class="content">
                <div class="info">Administración de Equipos y Herramientas</div>
                <a href="/equipments_and_tools/" class="btn">Ingresar</a>
                <a href="#" class="btnmas">Conoce más</a>
              </div>
            </div>
            <div class="card" style="background-image: url('/static/assets/images/landing/bgServicios.jpg')">
              <div class="overlay"></div>
              <div class="title">CapitalSERVICES</div>
              <div class="content">
                <div class="info">Gestor de servicios y proveedores</div>
                <a href="/category_services/" class="btn">Ingresar</a>
                <a href="#" class="btnmas">Conoce más</a>
              </div>
            </div>
          </div>
    </section>

    <div class="info-banner">
        <div class="info-options">
            <h2>Quiero hacer mi empresa más eficiente!</h2>
            <p>Selecciona lo que estás buscando</p>
            <div class="button-group-portal">
                <button data-portals="technology">TECH</button>
                <button data-portals="data">DATA</button>
                <button data-portals="transports">TRANSPORT</button>
                <button data-portals="assets-and-tools">ASSETS</button>
                <button data-portals="services">SERVICES</button>
                
            </div>
            <div class="button-group">
                <button data-personal="sm">2-9 Empleados</button>
                <button data-personal="md">10-29 Empleados</button>
                <button data-personal="lg">+30 Empleados</button>   
            </div>
            <div class="button-group">
                <button data-stock="minimum">1000 Unidades de almacenamiento</button>
                <button data-stock="medio">5000 Unidades de almacenamiento</button>
                <button data-stock="unlimited">Almacenamiento Ilimitado</button>
            </div>
            <div class="button-group">
                <button data-business="local">Sucursal</button>
                <button data-business="store">Tienda</button>
                <button data-business="corporation">Corporativo</button>
                <button data-business="storage">Almacén</button>
                <button data-business="multinational">Multinacional</button>
            </div>
            <button class="cta open-quotation">Cotizar mi plataforma</button>
        </div>
        
        <div class="info-image">
          <div class="info-text">
            <h1>Connected tools.<br>Better business.</h1>
            <p>Simplify the financial side so you can focus on the bigger picture.</p>
            <a href="#contact" class="cta">See plans & pricing</a>
          </div>
          <img src="/static/assets/images/landing/info-banner.jpg" alt="Person working in cafe">
        </div>
      </div>

    <section class="pricing-section" id="pricing">
        <h2 class="pricing-title">¡Consulta nuestros planes y despega!</h2>
        <div class="pricing-container">
            <div class="pricing-plan">
                <div class="plan">
                    <h3>Plan Básico</h3>
                    <p class="price">$119<span>mxn/mensual</span></p>
                    <h4>Costo anual a $1,309 mxn</h4>
                    <ul>
                        <li>✅ 1 Usuario</li>
                        <li>✅ Acceso a solo un módulo</li>
                        <li>✅ Inventario limitado a 1000 Unidades</li>
                    </ul>
                    <div class="pricing-plan-cta">
                        <a href="#contact" class="cta">Cotizar</a>
                    </div>
                </div>
            </div>
            <div class="pricing-plan">
                <div class="plan">
                    <h3>Profesional</h3>
                    <p class="price">$238<span>mxn/mensual</span></p>
                    <h4>Costo anual a $2,618 mxn</h4>
                    <ul>
                        <li>✅ 3 Usuario</li>
                        <li>✅ Acceso a tres módulos</li>
                        <li>✅ Inventario limitado a 15000 Unidades</li>
                    </ul>
                    <div class="pricing-plan-cta">
                        <a href="#contact" class="cta">Cotizar</a>
                    </div>
                </div>
            </div>
            <div class="pricing-plan">
                <div class="plan">
                    <h3>Empresarial</h3>
                    <p class="price">$519<span>mxn/mensual</span></p>
                    <h4>Costo anual a $5,709 mxn</h4>
                    <ul>
                        <li>✅ Usuario Ilimitados</li>
                        <li>✅ Acceso a todos los módulos</li>
                        <li>✅ Inventario ilimitado</li>
                    </ul>
                    <div class="pricing-plan-cta">
                        <a href="#contact" class="cta">Cotizar</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    
    <section class="contact-section" id="contact">
        <div class="contact-container">
            <h2>Contáctanos</h2>
            <p>Si tienes alguna pregunta o necesitas más información, no dudes en contactarnos.</p>
            <form action="#" method="POST" class="contact-form">
                {% csrf_token %}
                <div class="form-group">
                    <input type="text" name="name" required>
                    <div class="contact_labelline">Nombre</div>
                </div>
                <div class="form-group">
                    <input type="text" name="name_company" required>
                    <div class="contact_labelline">Nombre de la empresa</div>
                </div>
                <div class="form-group">
                    <input type="text" name="email" required>
                    <div class="contact_labelline">Correo electrónico</div>
                </div>
                <div class="form-group">
                    <textarea id="message" name="message" required></textarea>
                    <div class="contact_labelline">Mensaje</div>
                </div>
                <button type="submit" class="cta">Enviar mensaje</button>
            </form>
        </div>
    </section>

    <footer class="footer-section">
        <!-- Footer Superior -->
        <div class="footer-top">
            <div class="footer-column">
                <h4>Enlaces Rápidos</h4>
                <ul>
                    <li><a href="#home">Inicio</a></li>
                    <li><a href="#pricing">Planes</a></li>
                    <li><a href="#contact">Contacto</a></li>
                    {% if not user.is_authenticated %}
                        <li><a href="/user/login/">Iniciar sesión</a></li>
                    {% endif %}
                </ul>
            </div>
            <div class="footer-column">
                <h4>Servicios</h4>
                <ul>
                    <li><a href="/computers-equipment/">Equipo de computo</a></li>
                    <li><a href="/infrastructure/">Infraestructura</a></li>
                    <li><a href="/vehicles/">Vehículos</a></li>
                    <li><a href="/equipments_and_tools/">Equipos y herramientas</a></li>
                    <li><a href="/category_services/">Servicios</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Contacto</h4>
                <ul>
                    <li>Email: cris.cuamatzi@tenergy.com.mx</li>
                    <li>Tel: (442) 208 6040</li>
                    <li>Ubicación: Camino a Calichar KM 100 + 1, Apaseo el Alto. Guanajuato, México.</li>
                </ul>
            </div>
        </div>
    
        <!-- Footer Inferior -->
        <div class="footer-bottom">
            <p>&copy; 2024 Tenergy,  Todos los derechos reservados.</p>
        </div>
    </footer>

</body>

<!-- M O D A L  Q U O T A T I O N -->
<div class="quotation-modal" id="quotationModal">
    <div class="quotation-modal-content">
        <span class="quotation-close" id="quotationClose">&times;</span>
        <h2>Solicitar Cotización</h2>
        <form action="{% url 'enviar_cotizacion' %}" method="POST" class="quotation-form">
        {% csrf_token %}
        <div class="form-group">
            <input type="text" name="name" required>
            <div class="contact_labelline">Nombre</div>
        </div>
        <div class="form-group">
            <input type="text" name="company" required>
            <div class="contact_labelline">Empresa</div>
        </div>
        <div class="form-group">
            <input type="email" name="email" required>
            <div class="contact_labelline">Correo electrónico</div>
        </div>
        <div class="form-group">
            <textarea name="details"></textarea>
            <div class="contact_labelline">Detalles de la cotización.</div>
        </div>
        <button type="submit" class="cta">Enviar Cotización</button>
        </form>
    </div>
</div>

{% if sendEmail %}
    <script>
        setTimeout(function(){
            alert("FORMULARIO DE CONTACTO ENVIADO");
        }, 3000);
    </script>
{% endif %}


<script>
    let options_quotations = ""
    document.querySelector('.quotation-form').addEventListener('submit', async function(e) {
        e.preventDefault(); // Evitar que el formulario se envíe de manera tradicional
        const form = e.target;
        let formData = new FormData(form);
        formData.append("options_quotations", options_quotations);

        try {
            const response = await fetch(form.action, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': form.querySelector('[name=csrfmiddlewaretoken]').value
                },
                body: formData
            });

            if (response.ok) {
                const data = await response.json();
                // Aquí podrías mostrar un mensaje de éxito
                alert('Cotización enviada con éxito.');
                options_quotations = "";
                document.querySelectorAll("button.filled").forEach(button => 
                    button.classList.remove("filled")
                );
                form.reset();
            } else {
                console.error('Error al enviar el formulario.');
                alert('Ocurrió un error al enviar la cotización.');
            }
        } catch (error) {
            console.error('Error en la solicitud:', error);
            alert('Error de conexión al enviar la cotización.');
        }
    });


    document.addEventListener('DOMContentLoaded', function () {
        /*STYLE AND ANIMATION FOR THE MODALS QUOTATION*/
        const quotationModal = document.getElementById('quotationModal');
        const quotationClose = document.getElementById('quotationClose');
        const openQuotationBtns = document.querySelectorAll('.open-quotation');
    
        openQuotationBtns.forEach(btn => {
            btn.addEventListener('click', function (e) {
                e.preventDefault();
                quotationModal.style.display = 'block';
                const filledButtons = document.querySelectorAll("button.filled");
                const selectedValues = {};
                let i = 0;
                filledButtons.forEach(button => {
                    const dataset = button.dataset;
                    for (const key in dataset){
                        options_quotations += `${dataset[key]},`;
                        i++;
                    }
                });
            });
        });
    
        quotationClose.addEventListener('click', function () {
            quotationModal.style.display = 'none';
        });
    
        window.addEventListener('click', function (e) {
            if (e.target == quotationModal) {
                quotationModal.style.display = 'none';
            }
        });

        /*ADD ACTIVE STYLE IN BUTTON GROUP*/
        const buttons = document.querySelectorAll(".button-group-portal button");

        buttons.forEach(function(button) {
            button.addEventListener("click", function(e) {
                e.target.classList.toggle("filled");
            });
        });

        document.querySelectorAll('.button-group').forEach(group => {
            group.addEventListener('click', function(e) {
                if (e.target.tagName === 'BUTTON') {
                    // Limpiamos 'filled' solo dentro del grupo clickeado
                    group.querySelectorAll('button').forEach(button => {
                        button.classList.remove('filled');
                    });
                    // Añadimos 'filled' solo al botón presionado
                    e.target.classList.add('filled');
                }
            });
        });


        /*THIS FOR THE PANNEL VIEWS, WHEN THE VIEW IS IN PHONE*/
        const view_features = document.querySelectorAll('.landing-section .feature');
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                const image = entry.target.querySelector('img');
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    image.classList.add('visible');
                } else {
                    entry.target.classList.remove('visible');
                    image.classList.remove('visible');
                }
            });
        },{
            threshold: 0.5
        });
        view_features.forEach(view_feature => {
            observer.observe(view_feature);
        });

        /*THIS FOR THE NAVBAR WHEN THE WEBSITE IT'S BEING SEE IN A PHONE*/
        const navbarToggle = document.getElementById('navbar-toggle');
        const navbarLinks = document.getElementById('navbar-links');
        navbarToggle.addEventListener('click', () => {
            navbarLinks.classList.toggle('active');
            navbarToggle.classList.toggle('active');
        });

        /*THIS FOR THE PANNEL VIEWS, WHEN THE MOUSE IT'S OVER THE SECCTION, THIS SHOW THE IMAGE, TEXT, AND BUTTON*/
        const features = document.querySelectorAll('.feature');
        const container = document.querySelector('.container');
        // Observar cada "feature"
        features.forEach(feature => {
            observer.observe(feature);
        });
        features.forEach(function(feature) {
            feature.addEventListener('mouseenter', function() {
                features.forEach(function(otherFeature) {
                    if (otherFeature !== feature) {
                        otherFeature.style.opacity = 0.4;
                    }
                });
            });
            feature.addEventListener('mouseleave', function() {
                features.forEach(function(otherFeature) {
                    otherFeature.style.opacity = 1;
                });
            });
        });

        /*AUTO SCROLL WITH THE NAVBAR DINAMIC AND FLUID*/
        const navLinks = document.querySelectorAll('.navbar-links a');
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                if(targetId == "login"){
                    window.location.pathname = "user/login/"
                }
                const targetElement = document.getElementById(targetId);
                window.scrollTo({
                    top: targetElement.offsetTop,
                    behavior: 'smooth'
                });
                navbar.style.top = '-300px';
            });
        });

        /*NAVBAR DISAPPEAR WHEN THE SCROLL ITS DOWN BUT SHOW'S WHEN IT'S UP*/
        let lastScrollTop = 0;
        const navbar = document.querySelector('.navbar');
        window.addEventListener('scroll', function() {
            let currentScroll = window.pageYOffset || document.documentElement.scrollTop;
            if (currentScroll > lastScrollTop) {
                navbar.style.top = '-300px';
            } else {
                navbar.style.top = '0';
            }
            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
        });
    });
</script>
</html>
